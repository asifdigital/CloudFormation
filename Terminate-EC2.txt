#find relevant EC2
INSTANCE_ID=$(aws ec2 describe-instances \
  --region us-east-1 \
  --filters "Name=tag:Name,Values=datacenter-ec2" \
  --query "Reservations[0].Instances[0].InstanceId" \
  --output text)

#Terminate instances
aws ec2 terminate-instances \
  --region us-east-1 \
  --instance-ids $INSTANCE_ID

#verify by method 1
aws ec2 wait instance-terminated \
  --region us-east-1 \
  --instance-ids $INSTANCE_ID

#or verify by methodn 2
aws ec2 describe-instances \
  --region us-east-1 \
  --instance-ids $INSTANCE_ID \
  --query "Reservations[0].Instances[0].State.Name" \
  --output text


#incase termination protection needs to be removed
aws ec2 modify-instance-attribute \
  --region us-east-1 \
  --instance-id $INSTANCE_ID \
  --no-disable-api-termination